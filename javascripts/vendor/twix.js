(function(){var t,n,e,r=[].slice;if(t="undefined"!=typeof module&&null!==module&&null!=module.exports,n=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=function(t){var e;if(null==t)throw new Error("Can't find moment");return e=function(){function e(n,e,r,i){var a;null==i&&(i={}),"string"!=typeof r&&(i=null!=r?r:{},r=null),"boolean"==typeof i&&(i={allDay:i}),this._oStart=t(n,r,i.parseStrict),this._oEnd=t(e,r,i.parseStrict),this.allDay=null!=(a=i.allDay)&&a,this._mutated()}return e._extend=function(){var t,n,e,i,a,o;for(n=arguments[0],o=2<=arguments.length?r.call(arguments,1):[],e=0,i=o.length;e<i;e++){a=o[e];for(t in a)"undefined"!=typeof a[t]&&(n[t]=a[t])}return n},e.prototype.start=function(){return this._start.clone()},e.prototype.end=function(){return this._end.clone()},e.prototype.isSame=function(t){return this._start.isSame(this._end,t)},e.prototype.length=function(t,n){return null==n&&(n=!1),this._displayEnd.diff(this._start,t,n)},e.prototype.count=function(t){var n,e;return e=this.start().startOf(t),n=this.end().startOf(t),n.diff(e,t)+1},e.prototype.countInner=function(t){var n,e,r;return e=this._inner(t),r=e[0],n=e[1],r>=n?0:n.diff(r,t)},e.prototype.iterate=function(t,n,e){var r,i,a,o;return a=this._prepIterateInputs(t,n,e),t=a[0],n=a[1],e=a[2],o=this.start().startOf(n),r=this.end().startOf(n),this.allDay&&(r=r.add(1,"d")),i=function(t){return function(){return!t.allDay&&o<=r&&(!e||!o.isSame(r)||t._end.hours()>e)||t.allDay&&o<r}}(this),this._iterateHelper(n,o,i,t)},e.prototype.iterateInner=function(t,n){var e,r,i,a,o;return i=this._prepIterateInputs(t,n),t=i[0],n=i[1],a=this._inner(n,t),o=a[0],e=a[1],r=function(){return o<e},this._iterateHelper(n,o,r,t)},e.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)},e.prototype.asDuration=function(){var n;return n=this._end.diff(this._start),t.duration(n)},e.prototype.isPast=function(){return this._lastMilli<t()},e.prototype.isFuture=function(){return this._start>t()},e.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},e.prototype.contains=function(n){return t.isMoment(n)||(n=t(n)),this._start<=n&&this._lastMilli>=n},e.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)},e.prototype.overlaps=function(t){return this._displayEnd.isAfter(t._start)&&this._start.isBefore(t._displayEnd)},e.prototype.engulfs=function(t){return this._start<=t._start&&this._displayEnd>=t._displayEnd},e.prototype.union=function(t){var n,r,i;return n=this.allDay&&t.allDay,i=this._start<t._start?this._start:t._start,r=this._lastMilli>t._lastMilli?n?this._end:this._displayEnd:n?t._end:t._displayEnd,new e(i,r,n)},e.prototype.intersection=function(t){var n,r,i;return n=this.allDay&&t.allDay,i=this._start>t._start?this._start:t._start,r=this._lastMilli<t._lastMilli?n?this._end:this._displayEnd:n?t._end:t._displayEnd,new e(i,r,n)},e.prototype.xor=function(){var t,n,i,a,o,s,l,u,f,h,p,d,m,c,y,_,D,v;for(c=1<=arguments.length?r.call(arguments,0):[],d=0,D=null,_=[],t=function(){var t,n,e;for(e=[],t=0,n=c.length;t<n;t++)p=c[t],p.allDay&&e.push(p);return e}().length===c.length,n=[],y=[this].concat(c),a=s=0,f=y.length;s<f;a=++s)o=y[a],n.push({time:o._start,i:a,type:0}),n.push({time:o._displayEnd,i:a,type:1});for(n=n.sort(function(t,n){return t.time-n.time}),l=0,h=n.length;l<h;l++)m=n[l],1===m.type&&(d-=1),d===m.type&&(D=m.time),d===(m.type+1)%2&&(D&&(u=_[_.length-1],u&&u._end.isSame(D)?(u._oEnd=m.time,u._mutated()):(i=t?m.time.clone().subtract(1,"d"):m.time,v=new e(D,i,t),v.isEmpty()||_.push(v))),D=null),0===m.type&&(d+=1);return _},e.prototype.difference=function(){var t,n,e,i,a,o;for(e=1<=arguments.length?r.call(arguments,0):[],i=this.xor.apply(this,e).map(function(t){return function(n){return t.intersection(n)}}(this)),a=[],t=0,n=i.length;t<n;t++)o=i[t],!o.isEmpty()&&o.isValid()&&a.push(o);return a},e.prototype.split=function(){var e,i,a,o,s,l,u,f,h,p;if(e=1<=arguments.length?r.call(arguments,0):[],a=u=this.start(),t.isDuration(e[0])?i=e[0]:!t.isMoment(e[0])&&!n(e[0])&&"object"==typeof e[0]||"number"==typeof e[0]&&"string"==typeof e[1]?i=t.duration(e[0],e[1]):h=n(e[0])?e[0]:e,h&&(h=function(){var n,e,r;for(r=[],n=0,e=h.length;n<e;n++)f=h[n],r.push(t(f));return r}(),h=function(){var t,n,e;for(e=[],t=0,n=h.length;t<n;t++)l=h[t],l.isValid()&&l>=u&&e.push(l);return e}().sort(function(t,n){return t.valueOf()-n.valueOf()})),i&&0===i.asMilliseconds()||h&&0===h.length)return[this];for(p=[],s=0,o=this._displayEnd;u<o&&(null==h||h[s]);)a=i?u.clone().add(i):h[s].clone(),a=t.min(o,a),u.isSame(a)||p.push(t.twix(u,a)),u=a,s+=1;return!a.isSame(this._displayEnd)&&h&&p.push(t.twix(a,this._displayEnd)),p},e.prototype.divide=function(t){return this.split(this.length()/t,"ms").slice(0,+(t-1)+1||9e9)},e.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd},e.prototype.equals=function(t){return t instanceof e&&this.allDay===t.allDay&&this._start.valueOf()===t._start.valueOf()&&this._end.valueOf()===t._end.valueOf()},e.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"},e.prototype.toArray=function(t,n,e){var r,i;for(r=this.iterate(t,n,e),i=[];r.hasNext();)i.push(r.next());return i},e.prototype.simpleFormat=function(t,n){var r,i;return r={allDay:"(all day)",template:e.formatTemplate},e._extend(r,n||{}),i=r.template(this._start.format(t),this._end.format(t)),this.allDay&&r.allDay&&(i+=" "+r.allDay),i},e.prototype.format=function(n){var r,i,a,o,s,l,u,f,h,p,d,m,c,y,_,D,v;if(this.isEmpty())return"";for(d=this._start.localeData()._longDateFormat.LT[0],y={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:d,minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:e.formatTemplate},e._extend(y,n||{}),l=[],c=y.hourFormat&&"h"===y.hourFormat[0],f=y.lastNightEndsAt>0&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&this._start.hours()>12&&this._end.hours()<y.lastNightEndsAt,m=!(y.hideDate||y.implicitDate&&this.start().startOf("d").valueOf()===t().startOf("d").valueOf()&&(this.isSame("d")||f)),r=!(this.allDay||y.hideTime),this.allDay&&this.isSame("d")&&(y.implicitDate||y.explicitAllDay)&&l.push({name:"all day simple",fn:function(){return y.allDay},pre:" ",slot:0}),!m||y.hideYear||y.implicitYear&&this._start.year()===t().year()&&this.isSame("y")||l.push({name:"year",fn:function(t){return t.format(y.yearFormat)},pre:", ",slot:4}),r&&m&&l.push({name:"month-date",fn:function(t){return t.format(y.monthFormat+" "+y.dayFormat)},ignoreEnd:function(){return f},pre:" ",slot:2}),!r&&m&&l.push({name:"month",fn:function(t){return t.format(y.monthFormat)},pre:" ",slot:2}),!r&&m&&l.push({name:"date",fn:function(t){return t.format(y.dayFormat)},pre:" ",slot:3}),m&&y.showDayOfWeek&&l.push({name:"day of week",fn:function(t){return t.format(y.weekdayFormat)},pre:" ",slot:1}),y.groupMeridiems&&c&&!this.allDay&&!y.hideTime&&l.push({name:"meridiem",fn:function(t){return t.format(y.meridiemFormat)},slot:6,pre:y.spaceBeforeMeridiem?" ":""}),this.allDay||y.hideTime||l.push({name:"time",fn:function(t){var n;return n=0===t.minutes()&&y.implicitMinutes&&c?t.format(y.hourFormat):t.format(y.hourFormat+":"+y.minuteFormat),!y.groupMeridiems&&c&&(y.spaceBeforeMeridiem&&(n+=" "),n+=t.format(y.meridiemFormat)),n},slot:5,pre:", "}),D=[],a=[],i=[],v=!0,_=function(t){return function(n){var e,r,s;return s=n.fn(t._start),e=n.ignoreEnd&&n.ignoreEnd()?s:n.fn(t._end),r={format:n,value:function(){return s}},e===s&&v?i.push(r):(v&&(v=!1,i.push({format:{slot:n.slot,pre:""},value:function(){return y.template(o(D),o(a,!0).trim())}})),D.push(r),a.push({format:n,value:function(){return e}}))}}(this),h=0,p=l.length;h<p;h++)s=l[h],_(s);return u=!0,(o=function(t,n){var e,r,i,a,o,s;for(i=!0,s="",a=t.sort(function(t,n){return t.format.slot-n.format.slot}),e=0,r=a.length;e<r;e++)o=a[e],u||(s+=i&&n?" ":o.format.pre),s+=o.value(),u=!1,i=!1;return s})(i)},e.prototype._iterateHelper=function(t,n,e,r){return{next:function(){var i;return e()?(i=n.clone(),n.add(r,t),i):null},hasNext:e}},e.prototype._prepIterateInputs=function(){var n,e,i,a,o,s;return n=1<=arguments.length?r.call(arguments,0):[],"number"==typeof n[0]?n:("string"==typeof n[0]&&(a=n.shift(),e=null!=(o=n.pop())?o:1,n.length&&(i=null!=(s=n[0])&&s)),t.isDuration(n[0])&&(a="ms",e=n[0].as(a)),[e,a,i])},e.prototype._inner=function(t,n){var e,r,i,a,o;return null==t&&(t="ms"),null==n&&(n=1),o=this.start(),i=this._displayEnd.clone(),o>o.clone().startOf(t)&&o.startOf(t).add(n,t),i<i.clone().endOf(t)&&i.startOf(t),r=o.twix(i).asDuration(t),e=r.get(t),a=e%n,i.subtract(a,t),[o,i]},e.prototype._mutated=function(){return this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart,this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd,this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd,this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end},e}(),e._extend(t.locale(),{_twix:e.defaults}),e.formatTemplate=function(t,n){return t+" - "+n},t.twix=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,i=t.apply(r,n);return Object(i)===i?i:r}(e,arguments,function(){})},t.fn.twix=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,i=t.apply(r,n);return Object(i)===i?i:r}(e,[this].concat(r.call(arguments)),function(){})},t.fn.forDuration=function(t,n){return new e(this,this.clone().add(t),n)},t.duration.fn&&(t.duration.fn.afterMoment=function(n,r){return new e(n,t(n).clone().add(this),r)},t.duration.fn.beforeMoment=function(n,r){return new e(t(n).clone().subtract(this),n,r)}),t.twixClass=e,e},t)return module.exports=e(require("moment"));"function"==typeof define&&define("twix",["moment"],function(t){return e(t)}),this.moment?this.Twix=e(this.moment):"undefined"!=typeof moment&&null!==moment&&(this.Twix=e(moment))}).call(this);