<html><head lang="en"><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>Isaac Cambron</title><link href="/stylesheets/main.css" rel="stylesheet" /><script src="/javascripts/main.js"></script></head><body><div class="navbar navbar-inverse"><div class="navbar-header"><button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse"><span class="sr-only">Toggle navigation</span><span class="fa fa-bars"></span></button><a class="navbar-brand" href="/">Isaac</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/">About</a></li><li><a href="/projects.html">OSS Projects</a></li><li><a href="/resume.html">Resume</a></li><li><a href="/blog">Blog</a></li></ul></div></div><div class="container"><div id="blog"><div id="blog-info"><div id="blog-info-content"><h4>Isaac Cambron</h4><p><a href="http://twitter.com/icambron">@icambron</a></p><p><i class="fa fa-rss"></i> <a href="/blog/feed.xml">Feed</a></p></div></div><div id="blog-articles"><p><a href="/blog/page/2/">Previous page</a></p><div class="blog-article"><div class="blog-content"><h2><a href="/blog/2011/10/05/google-profits-and-scale.html">Scale and Google's Customer Support</a></h2><p class="blog-date">Oct  5, 2011</p><div class="blog-content-body"><p><a href="http://news.ycombinator.com/item?id=3099875">This Hacker News item</a> is a complaint about a website being delisted by Google without a good, easily-understood explanation. <a href="http://twitter.com/#!/mattcutts">Matt Cutts</a>, who runs the webspam team at Google, jumped into the comment thread and provided some explanations. While the reasons he gave for delisting do make sense, one of the main counterarguments was that Google&rsquo;s customer support for webmasters is terrible, and the company is rather opaque and abrupt about the process. Why did the site owner have to find out how to fix it by getting his post at the top of Hacker News? </p>

<p>In the thread, Cutts says, in reference to a premium support option, &ldquo;Normally when we consider it, we end up saying things like &lsquo;Why don&rsquo;t we just try to make it so that people don&rsquo;t need that option?&rsquo;&rdquo; And that&rsquo;s fine; not needing customer support is better than needing it. But until they figure that out, Google <em>does</em> need it; you can&rsquo;t just dismiss it with a hand wave and a vague goal. Google has a <em>huge</em> transparency problem. Their rankings and delisting decisions are opaque and seemingly arbitrary. For good evidence of this, just take a look at <a href="http://teddziuba.com/2010/06/seo-is-mostly-quack-science.html">how quacky</a> the gigantic SEO industry is; witchcraft shouldn&rsquo;t seem like a viable option here. More generally, Google just doesn&rsquo;t have customer support worth much of anything, and they just don&rsquo;t seem to care about it. Why?</p>

<p>Cutts has an answer there, although I suppose I should point out that he&rsquo;s not acting as some sort of official spokesperson for Google. In responding to the opacity/abruptness/support complaint, he says this:</p>

<blockquote>
<p>I know that Google can seem abrupt sometimes, and I dislike that, but part of the issue is also scale. See <a href="https://plus.google.com/117377434815709898403/posts/1hRWj489oEz">https://plus.google.com/117377434815709898403/posts/1hRWj489&hellip;</a> that notes that if each Google user had a single 10 minute issue every three years, that would need 20,000+ support people to handle that load. Or consider that there&rsquo;s 200M domain names, and all those webmasters want to talk to Google and ask questions.</p>
</blockquote>

<p>For the record, I think this kind of direct engagement by important employees is great. But I don&rsquo;t buy Cutt&rsquo;s scale angle at all. Here&rsquo;s the thing: <strong>20,000 seems like a lot of people, but it&rsquo;s not.</strong> Consider this statement I just made up:</p>

<blockquote>
<p>I know McDonald&rsquo;s can be impersonal sometimes, and I dislike that, but part of the issue is also scale. If each McDonald&rsquo;s customer needed to be served a burger in person by a McDonald&rsquo;s employee, that would require 400,000 employees to physically make and serve all those burgers.</p>
</blockquote>

<p>And, of course, that&rsquo;s exactly what McDonald&rsquo;s does, and you&rsquo;d be really annoyed if you walked into McDonald&rsquo;s one day and your burger was sitting premade on a little heated tray that had been filled with foil-wrapped food hours earlier, and there was no one working there. McDonald&rsquo;s is actually a somewhat smaller company than Google ($24 billion vs $29 billion) and has far lower profits ($5 billion vs $9 billion). So Google makes a lot more money per dollar it spends. Those are obviously very different companies, and there are a lot of reasons McDonald&rsquo;s has lower profits than Google, but one of them is that <em>Google doesn&rsquo;t employ tens of thousands of people to do customer support</em>. But maybe it should!</p>

<p>We could debate whether 20,000 support people is enough, or actually way more than they&rsquo;d ever need, or whatever, but that&rsquo;s not the point. The fact is that Google isn&rsquo;t having difficulty scaling its customer support team. It&rsquo;s just not trying to build one at all. Yet it could clearly afford one as big or bigger than the 20,000 people it thinks of as crazily huge.</p>

<p>No, it&rsquo;s simpler: Google doesn&rsquo;t have an army of support people because it can make more money by having poor customer service. It has a monopoly on search, and if you want your website listed there, you&rsquo;ll play their game no matter how difficult it is. It&rsquo;s just not under any meaningful pressure to improve in this area. So instead of employing a bunch of people in call centers to answer your questions and fix mistakes, it pockets more money. Corporations are greedy&mdash;maximizing profits is their job&mdash;but we shouldn&rsquo;t be giving them a free pass on this sort of thing just because they&rsquo;ve complained it&rsquo;s expensive. Making billions of dollars is supposed to be hard work. We should all be demanding better customer support from Google, and maybe we should be taking a good hard look at their competitive practices in this area.</p>
</div><a class="pull-right" href="http://github.com/icambron/isaaccambron.com/tree/master/source/blog/2011-10-05-google-profits-and-scale.html.markdown">Source</a><div class="clearfix"></div><hr /></div></div><div class="blog-article"><div class="blog-content"><h2><a href="/blog/2011/09/29/introducing-spandex.html">Introducing Spandex</a></h2><p class="blog-date">Sep 29, 2011</p><div class="blog-content-body"><p>So you&rsquo;re a programmer, and you want to start a blog. You&rsquo;ve got some pretty cool opinions about software construction and that wine from dinner has you thinking the entire world has just <em>got</em> to know all about them. And maybe some neat posts about the aardvarks you&rsquo;ve seen lately. Sitting down with your digestif, you get to work. You go the standard route: you find one of the dozen crummy WordPress hosts, pick a theme, and start typing your brilliance into a form in the admin section of your site. And it sorta works.</p>

<p>But then you start thinking about it:</p>

<ul>
<li><p>Why can&rsquo;t you use your favorite editor? I mean, you spent all this time customizing the crap out of your Emacs experience, and now you&rsquo;re typing tons of content into a form in your <em>browser</em>?</p></li>
<li><p>Man do these WISYWYG editors blow. Wouldn&rsquo;t you rather be using a nice markup language, like maybe something similar to what <a href="http://stackoverflow.com">StackOverflow</a> uses?</p></li>
<li><p>WP&rsquo;s admin interface is your content management system. But you&rsquo;re already very proficient with a much fancier, more powerful CMS: your source control system. You can use it from the command line instead of a clunky interface, and you can do a lot more with it. Why can&rsquo;t you use that?</p></li>
<li><p>Your posts live in a database somewhere that you don&rsquo;t really have access to.</p></li>
<li><p>No, but really, did I mention your WP host totally sucks ass? I guess you could install WP on an EC2 instance, but that seems like overkill, right? Maybe you could host it on <a href="http://heroku.com">Heroku</a>?</p></li>
</ul>

<h3>A different model</h3>

<p>A better idea might be a site that reads your posts from files (like, on the filesystem!) and generates web pages from them. Now you can manage those files in Git and edit them however you want. And if they&rsquo;re built on a cool stack, you&rsquo;ll be able to host it somewhere free and nice. So, you look around, and there are some pretty cool options:</p>

<ul>
<li><p><a href="https://github.com/mojombo/jekyll">Jekyll</a>: Generate static HTML pages from Textile or Markdown files and then host them wherever you want.</p></li>
<li><p><a href="http://nestacms.com/">Nesta</a>: Dynamically generate a site from markup files. Themes, plugins, and all that jazz.</p></li>
<li><p><a href="https://github.com/cloudhead/toto">Toto</a>: Another dynamic site that generates the blog from static Markdown files.</p></li>
</ul>

<p>I&rsquo;m sure there are others. I lean more towards the Nesta/Toto model of generating the HTML dynamically. That narrows my hosting options (because my host will have to support whatever web framework the engine runs on), but means there&rsquo;s less for me to actually do (I don&rsquo;t have to generate the site before pushing it to the host). But whatevs.</p>

<h3>What&rsquo;s a blog, anyway?</h3>

<p>But you&rsquo;re feeling a bit greedy and you want to do even more with less. So you think, what, in a technical sense, is a blog? It&rsquo;s two things: 1) a simple content management system that keeps track of your posts, figures out which ones to show your user, turns them into HTML, and generates an RSS feed; and 2) a web application to actually show those posts in. A blog engine tackles both things. </p>

<p>But here&rsquo;s the thing: you&rsquo;re good at building websites. You want to build your <strong>own</strong> website, where you control what the URLs mean, and how the framing markup gets generated, and all that jazz. Maybe you want to integrate the blog into an existing site. Maybe you want customize the framing HTML (you know the chrome stuff like the title and footer and sidebars), but you really <em>hate</em> Haml for some reason and Nesta uses it for just that purpose. And you don&rsquo;t really want to think about &ldquo;themes&rdquo;; you want to have some HTML and write some CSS for it, and that&rsquo;s that. The world has built you a bunch of awesome web frameworks to build sites with, and dammit you want to use them. It&rsquo;s just the CMS part that&rsquo;s annoying; there has to be some code somewhere that pulls the right files off of disk and formats them when the user, say, clicks on the links for posts tagged &ldquo;aardvarks&rdquo;. (You love aardvarks, it turns out. No one is sure why.)</p>

<p>I&rsquo;m going to assume, for no real reason, that you&rsquo;re the kind of programmer who likes Ruby. It&rsquo;s a good thing you are, because I have some good news: <strong>I wrote you the piece that does all the content management</strong>. It&rsquo;s called Spandex.</p>

<h3>Spandex!</h3>

<p>OK, so first of all, what kind of abject moron names a programming library &ldquo;spandex&rdquo;? When you hear it, all you can think about is this:</p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/J1c2KzJbcGA" frameborder="0" allowfullscreen></iframe>

<p>Yeah, I don&rsquo;t know. The gem name wasn&rsquo;t taken. Anyway, Spandex lets you do stuff like:</p>
<pre class="highlight ruby"><code><span class="n">some_posts</span> <span class="o">=</span> <span class="n">spandex</span><span class="p">.</span><span class="nf">find_articles</span><span class="p">(</span><span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="s1">'aardvarks'</span><span class="p">)</span>
<span class="n">some_posts</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"Title: </span><span class="si">#{</span><span class="n">post</span><span class="p">.</span><span class="nf">title</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Stuff about aardvarks: </span><span class="si">#{</span><span class="n">post</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre>
<p>How do you make these awesome posts about aardvarks? Here&rsquo;s <code>omg_aardvarks.md</code>:</p>
<pre class="highlight plaintext"><code>Title: Oh my God I saw some aardvarks!
Tags: aardvarks, things i saw today
Date: 2011/9/2011

I was just riding my bike down the street and **LO AND BEHOLD**, an aardvark!!!
</code></pre>
<p>Yeah, your aardvark obsession is a bit creepy; let&rsquo;s more on. The top part of the file consists of key-value pairs that provide metadata to Spandex. Stuff like whether it&rsquo;s in draft mode. The bottom is the content. You can write it in any markup language supported by <a href="https://github.com/rtomayko/tilt">Tilt</a>; it&rsquo;ll decide which to use based on the extension. And you can customize that through Tilt itself.</p>

<p>There are a lot more details, examples, and awkward non sequiturs on Spandex&rsquo;s <a href="https://github.com/icambron/spandex">Github page</a>.</p>

<p>Sounds easy, right? So finish your glass of port, get a sixpack of beer, and let&rsquo;s build a blog.</p>

<h3>Build ye blog</h3>

<p>You&rsquo;re going to want to start simple. A blog with some posts, an about page, something allows all of your avid fans to comment, and an atom feed.</p>

<p>Let&rsquo;s get to work. We&rsquo;ve got our spandex on, so now we just need to build a website. Let&rsquo;s use <a href="http://sinatrarb.com">Sinatra</a>, <a href="http://haml-lang.com/">Haml</a> (which I guess you don&rsquo;t hate after all), and the SCSS variety of <a href="http://sass-lang.com/">Sass</a>. OK, here&rsquo;s our directory structure:</p>
<pre class="highlight plaintext"><code>   +- app.rb              # Your Sinatra app
   |
   +- config.ru           # Config file for making Sinatra sing. Get it?
   |
   +-content/             # Bucket of your content
   | |
   | +- omg_aarvarks.md   # Your first post!
   | |
   | +- about.md          # Some stuff about you
   |
   +- views/              # HTML templates for the chrome
      |
      +- index.haml       # Shows all of the posts in descending order
      |
      +- layout.haml      # Title bars and such
      |
      +- page.haml        # Display and individual post and its comments
</code></pre>
<p>So, <code>app.rb</code> handles the web requests:</p>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'sinatra'</span>
<span class="nb">require</span> <span class="s1">'spandex'</span>
<span class="nb">require</span> <span class="s1">'haml'</span>

<span class="n">content_dir</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">expand_path</span><span class="p">(</span><span class="s1">'content'</span><span class="p">,</span> <span class="no">File</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="kp">__FILE__</span><span class="p">))</span>
<span class="vc">@@spandex</span> <span class="o">=</span> <span class="no">Spandex</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">content_dir</span><span class="p">)</span>

<span class="c1">#render the index</span>
<span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  <span class="n">posts</span> <span class="o">=</span> <span class="vc">@@spandex</span><span class="p">.</span><span class="nf">all_articles</span>
  <span class="n">haml</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:posts</span> <span class="o">=&gt;</span> <span class="n">posts</span><span class="p">}</span>
<span class="k">end</span>

<span class="c1"># render the atom feed</span>
<span class="n">get</span> <span class="s1">'/feed.xml'</span> <span class="k">do</span>
  <span class="n">content_type</span> <span class="ss">:xml</span><span class="p">,</span> <span class="ss">:charset</span> <span class="o">=&gt;</span> <span class="s1">'utf-8'</span>
  <span class="vc">@@spandex</span><span class="p">.</span><span class="nf">atom_feed</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'Tiny Blog of Doom'</span><span class="p">,</span> <span class="s1">'Your name here'</span><span class="p">,</span> <span class="s1">'tinyblog.net'</span><span class="p">,</span> <span class="s1">'/feed.xml'</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># render stylesheets</span>
<span class="n">get</span> <span class="s1">'/css/:sheet.css'</span> <span class="k">do</span>
  <span class="n">content_type</span> <span class="s1">'text/css'</span><span class="p">,</span> <span class="ss">:charset</span> <span class="o">=&gt;</span> <span class="s1">'utf-8'</span>
  <span class="n">scss</span> <span class="n">params</span><span class="p">[</span><span class="ss">:sheet</span><span class="p">].</span><span class="nf">to_sym</span>
<span class="k">end</span>

<span class="c1">#render individual posts</span>
<span class="n">get</span> <span class="s1">'*'</span> <span class="k">do</span>
  <span class="n">post</span> <span class="o">=</span> <span class="vc">@@spandex</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:splat</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
  <span class="n">haml</span> <span class="ss">:page</span><span class="p">,</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:post</span> <span class="o">=&gt;</span>  <span class="n">post</span><span class="p">,</span> <span class="ss">:show_comments</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">}</span>
<span class="k">end</span>
</code></pre>
<p>The Haml files are also pretty simple. I won&rsquo;t cover all of the details, but here&rsquo;s <code>page.haml</code>:</p>
<pre class="highlight haml"><code><span class="nt">%h2</span>
  <span class="nt">%a</span><span class="p">{</span><span class="ss">:href</span> <span class="o">=&gt;</span> <span class="n">post</span><span class="p">.</span><span class="nf">path</span><span class="p">}=</span> <span class="n">post</span><span class="p">.</span><span class="nf">title</span>
<span class="nt">%div</span><span class="p">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">body</span>
<span class="p">-</span> <span class="k">if</span> <span class="n">show_comments</span> <span class="o">&amp;&amp;</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"DISQUS_NAME"</span><span class="p">]</span>
  <span class="p">-</span> <span class="k">if</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Application</span><span class="p">.</span><span class="nf">environment</span> <span class="o">==</span> <span class="ss">:development</span>
    <span class="nt">%script</span> var disqus_developer = true;
  <span class="nf">#disqus_thread</span>
  <span class="nt">%script</span><span class="p">{</span><span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">'text/javascript'</span><span class="p">,</span> <span class="ss">:src</span> <span class="o">=&gt;</span> <span class="s2">"http://#{ENV['DISQUS_NAME']}.disqus.com/embed.js"</span><span class="p">,</span> <span class="ss">:async</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">}</span>
</code></pre>
<p>That shows a single post and pulls in comments from <a href="disqus.com">Disqus</a>.</p>

<p>You can run the whole thing with <code>shotgun config.ru</code> or you can just check it into Git and push the whole thing to Heroku. The source for the entire tiny blog is <a href="https://github.com/icambron/tinyblogofdoom">here</a>. Check it out! DO IT NOW.</p>

<p>You can also check out the <a href="https://github.com/icambron/drunkencoder">code to this blog</a>, which naturally uses Spandex, and does some other neato things.</p>
</div><a class="pull-right" href="http://github.com/icambron/isaaccambron.com/tree/master/source/blog/2011-09-29-introducing-spandex.html.markdown">Source</a><div class="clearfix"></div><hr /></div></div></div></div></div><script type="text/javascript">!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-52148016-1","auto"),ga("send","pageview");</script></body></html>